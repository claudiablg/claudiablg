<!DOCTYPE html>
<html lang="en">
    <head>
        <base href="<%= htmlWebpackPlugin.files.publicPath %>">
        <!-- ENCODING, VIEWPORT META TAG -->
        <%= require('./templates/head-encoding-viewport.template.ejs')() %>

        <!-- APP DESCRIPTION -->
        <%= require('./templates/head-description.template.ejs')() %>

        <!-- AUTHORS -->
        <%= require('./templates/head-authors.template.ejs')() %>

        <!-- SEO -->
        <%= require('./templates/head-robots.template.ejs')() %>

        <!-- MANIFEST.JSON -->
        <!-- https://developer.mozilla.org/en-US/docs/Web/Manifest -->
        <!-- SEE PLUGIN manifest-json-html.plugin.conf.js-->
        <link rel="manifest" href="/manifest.json">

        <!-- FOR CORDOVA -->
        <% if(htmlWebpackPlugin.options.isCordovaApp) { %>

            <!-- CORDOVA CSP META TAGS -->
            <%= require('./templates/head-csp-cordova.template.ejs')({htmlWebpackPlugin: htmlWebpackPlugin}) %>

            <!-- CORDOVA SCRIPT -->
            <script src="cordova.js"></script>

        <% } else { %>
            <!-- FOR WEB -->

            <!-- INSTALLABLE WEB APP META TAGS -->
            <%= require('./templates/head-installable-web-app.template.ejs')({htmlWebpackPlugin: htmlWebpackPlugin}) %>

            <!-- CSP META TAGS -->
            <meta http-equiv="Content-Security-Policy" content="">

            <!-- FAVICONS-->
            <%= require('./templates/head-favicons.template.ejs')({htmlWebpackPlugin: htmlWebpackPlugin}) %>

        <% } %>

        <% if(!htmlWebpackPlugin.options.isDevServer) { %>
            <%= htmlWebpackPlugin.files.css
                .map(css => `<style>${compilation.assets[css.substr(htmlWebpackPlugin.files.publicPath.length)].source()}</style>`).join('') %>
        <% } %>
    </head>
<body>
    <!-- USE GENERATED INDEX SHELL IF CREATED, FALLBACK TO NO SHELL -->
    <div id="index"></div>

    <noscript>
        :$ JavaScript is required to run this application.
    </noscript>

    <!-- APP SCRIPTS -->
    <%= htmlWebpackPlugin.files.js.map(js => `<script defer src="${js}"></script>`).join('') %>
</body>
</html>
